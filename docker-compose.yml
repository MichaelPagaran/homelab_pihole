# /docker/pihole/docker-compose.yml
version: "3"

services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    hostname: pihole 
    
    # 1. Ports are exposed to the static IP 192.168.1.10
    ports:
      # DNS (Required)
      - "53:53/tcp"
      - "53:53/udp"
      # Web Interface
      - "80:80/tcp"
      
    # 2. Environment variables are loaded from the .env file
    environment:
      TZ: ${TZ}
      WEBPASSWORD: ${WEBPASSWORD}
      SERVERIP: ${SERVERIP}
      
    # 3. Volumes for persistent data
    volumes:
      - './etc-pihole:/etc/pihole'
      - './etc-dnsmasq.d:/etc/dnsmasq.d'
      
    # 4. Restart Policy and Capabilities
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
